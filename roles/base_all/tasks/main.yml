---
- name: Include secrets for base role
  include_vars: secrets/group_vars/all.yml
  tags:
    - base
    - secret

- name: Check if there are any hosts secrets
  stat: path="secrets/host_vars/{{ ansible_hostname }}.yml"
  register: host_secrets_exist

- name: Include host secrets
  include_vars: "secrets/host_vars/{{ ansible_hostname }}.yml"
  tags:
    - secret
    - users
  when: host_secrets_exist.stat.exists == True

- include: repos/repos.yml
  tags:
    - base

- include: packages.yml
  tags:
    - base

- include: sysctl.yml
  tags:
    - base

- include: misc.yml
  tags:
    - base

- include: python/python.yml
  tags:
    - base

- include: git.yml
  tags:
    - base
    - users

- include: tmux.yml
  tags:
    - base
    - users

- include: zsh.yml
  tags:
    - base
    - users
